resource "aws_secretsmanager_secret" "db_credentials" {n  name = "${var.project_name}-${var.environment}-db-credentials"nn  tags = {n    Name = "${var.project_name}-${var.environment}-db-credentials"n  }n}nnresource "aws_secretsmanager_secret_version" "db_credentials" {n  secret_id = aws_secretsmanager_secret.db_credentials.idn  secret_string = jsonencode({n    username = var.db_usernamen    password = var.db_passwordn    host     = aws_db_instance.main.endpointn    port     = aws_db_instance.main.portn    dbname   = "${var.project_name}_db"n  })n}nn# IAM policy for accessing secretsnnresource "aws_iam_policy" "secrets_access" {n  name = "${var.project_name}-${var.environment}-secrets-access"nn  policy = jsonencode({n    Version = "2012-10-17"n    Statement = [n      {n        Effect = "Allow"n        Action = [n          "secretsmanager:GetSecretValue"n        ]n        Resource = [n          aws_secretsmanager_secret.db_credentials.arnn        ]n      }n    ]n  })n}nn# Attach policy to ECS task rolenresource "aws_iam_role_policy_attachment" "ecs_task_secrets_policy" {n  role       = aws_iam_role.ecs_task_role.namen  policy_arn = aws_iam_policy.secrets_access.arnn}